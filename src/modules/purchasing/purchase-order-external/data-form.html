<template>
  
      
    <au-input-form
      title.bind="title"
      with.bind="context"
      options.bind="formOptions"
    >

    <div slot="actions" class="btn-group">
            <button class="btn btn-primary" click.delegate="context.unpost($event)" if.one-way="context.hasUnpost">Unpost</button>
        </div>

    <div class="row">
    <div class="col-md-6">

        <au-textbox                
          label="No. "                            
          value.bind="data.no"                    
          error.bind="error.no"                   
          read-only.bind="true" 
          if.bind="readOnly || isEdit"
        ></au-textbox>
        
        <au-autocomplete  
          label="Supplier"                        
          value.bind="data.supplier"              
          error.bind="error.supplier"           
          read-only.bind="readOnly"   
          change.delegate="supplierChanged($event)"
          loader.bind="supplierLoader"
          placeholder="cari supplier"
          key="code"
          read-only.bind="readOnly" 
        ></au-autocomplete>
        
        <au-datepicker             
          label="Tgl. Order"                      
          value.bind="data.date"                  
          error.bind="error.date"                 
          read-only.bind="readOnly"
        ></au-datepicker>
        
        <au-datepicker             
          label="Tgl. Delivery"                   
          value.bind="data.expectedDeliveryDate"  
          error.bind="error.expectedDeliveryDate" 
          read-only.bind="readOnly"
        ></au-datepicker>

        <au-dropdown              
          label="Ongkos Kirim Ditanggung oleh"    
          value.bind="data.freightCostBy"         
          error.bind="error.freightCostBy"        
          read-only.bind="readOnly"   
          items.bind="freightCostByOptions" 
        ></au-dropdown>
        
        <au-dropdown               
          label="Term Pembayaran"                 
          value.bind="data.paymentMethod"         
          error.bind="error.paymentMethod"        
          read-only.bind="readOnly"   
          items.bind="termPaymentOptions"  
          change.delegate="paymentMethodChanged($event)"
        ></au-dropdown>

        <au-autocomplete  
          label="Mata Uang"                       
          value.bind="data.currency"              
          error.bind="error.currency"             
          read-only.bind="readOnly"   
          change.delegate="currencyChanged($event)"
          loader.bind="currencyLoader"
          placeholder="cari mata uang"
          key="code"
          text="code"
        ></au-autocomplete>

        <au-numeric               
          label="Rate"                            
          value.bind="data.currency.rate"          
          error.bind="error.currency.rate"         
          read-only.bind="true"
        ></au-numeric>

        <au-numeric                
          label="Tempo Pembayaran"                
          value.bind="data.paymentDueDays"        
          error.bind="error.paymentDueDays"
          format="0" 
          post-fix="hari" 
          read-only.bind="data.paymentMethod =='CASH'"
        ></au-numeric>

        <au-autocomplete       
          label="Pajak Pph"                             
          value.bind="data.vat"                  
          error.bind="error.vat"                  
          read-only.bind="readOnly"   
          change.delegate="vatChanged($event)"
          loader.bind="vatLoader"
          key="_id"
          text="name"
        ></au-autocomplete>
        
        <au-numeric                
          label="Rate Pph"                        
          value.bind="data.vat.rate"               
          error.bind="error.vat.rate"                  
          read-only.bind="true" 
          format="0"       
          post-fix="%"
        ></au-numeric>
        
        <au-checkbox               
          label="Apakah kena Ppn?"                
          value.bind="data.useIncomeTax"          
          error.bind="error.useIncomeTax"         
          read-only.bind="readOnly"   
          change.delegate="useIncomeTaxChanged($event)"
        ></au-checkbox> 

        <au-multiline              
          label="Keterangan"                      
          value.bind="data.remark"                
          error.bind="error.remark"               
          read-only.bind="readOnly"
        ></au-multiline>

         </div>
  </div>

        <au-collection
          title="Detail PR"
          items.bind="data.items"
          columns.bind="PRColumns"
          add.bind="addItems"
          remove.bind="removeItems"
          read-only.bind="readOnly"
          item-template="modules/purchasing/purchase-order-external/template/no-pr"
        ></au-collection>
          
    </au-input-form>
   
      
</template>


<!--<template>
    <form class="form-horizontal">
        <textbox                label="No. "                            value.bind="data.no"                    error.bind="error.no"                   read-only.bind="true" if.bind="readOnly || isEdit"></textbox>
        
        <au-autocomplete  label="Supplier"                        value.bind="data.supplier"              error.bind="error.supplierId"           read-only.bind="readOnly"   change.delegate="supplierChanged($event)"></au-autocomplete>
        <datepicker             label="Tgl. Order"                      value.bind="data.date"                  error.bind="error.date"                 read-only.bind="readOnly"></datepicker>
        <datepicker             label="Tgl. Delivery"                   value.bind="data.expectedDeliveryDate"  error.bind="error.expectedDeliveryDate" read-only.bind="readOnly"></datepicker>
        <dropdown               label="Ongkos Kirim Ditanggung oleh"    value.bind="data.freightCostBy"         error.bind="error.freightCostBy"        read-only.bind="readOnly"   items.bind="freightCostByOptions" ></dropdown>
        <dropdown               label="Term Pembayaran"                 value.bind="data.paymentMethod"         error.bind="error.paymentMethod"        read-only.bind="readOnly"   items.bind="termPaymentOptions"  change.delegate="paymentMethodChanged($event)"></dropdown>
        <au-autocomplete  label="Mata Uang"                       value.bind="data.currency"              error.bind="error.currency"             read-only.bind="readOnly"   change.delegate="currencyChanged($event)"></au-autocomplete>
        <numeric                label="Rate"                            value.bind="data.currencyRate"          error.bind="error.currencyRate"         read-only.bind="true"></numeric>
        <numeric                label="Tempo Pembayaran"                value.bind="data.paymentDueDays"        error.bind="error.paymentDueDays"       read-only.bind="true"       post-fix="hari" if.bind="data.paymentMethod=='CASH'"></numeric>
        <numeric                label="Tempo Pembayaran"                value.bind="data.paymentDueDays"        error.bind="error.paymentDueDays"       read-only.bind="readOnly"   post-fix="hari" if.bind="data.paymentMethod!='CASH'"></numeric>
        <au-autocomplete       label="Pph"                             value.bind="data.vat"                   error.bind="error.vat"                  read-only.bind="readOnly"   change.delegate="vatChanged($event)"></au-autocomplete>
        <numeric                label="Rate Pph"                        value.bind="data.vatRate"               error.bind="error.vatRate"              read-only.bind="true"       post-fix="%"></numeric> 
        <checkbox               label="Apakah kena Ppn?"                value.bind="data.useIncomeTax"          error.bind="error.useIncomeTax"         read-only.bind="readOnly"   change.delegate="useIncomeTaxChanged($event)"></checkbox> 
        <multiline              label="Keterangan"                      value.bind="data.remark"                error.bind="error.remark"               read-only.bind="readOnly"></multiline>
        <hr />
        <div class="form-group ${error && error.items ? 'has-error' : ''}" >
            <span class="help-block">${error.items.toString()==="[object Object]" ? "" : error.items}</span>
        </div>
            <au-collection value.bind="data.items" error.bind="error.items" read-only.bind="readOnly" use-income-tax.bind = "data.useIncomeTax"></au-collection>
        
            </form>
</template>-->
